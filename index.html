<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="compiled/menu.css">
</head>
<body>

    <div class="menu-page" style="background-image: url(./img/menu/background.png)">
        <div class="menu-page__left">
            <div class="menu-page__logo">
                <div style="background-image: url(./img/menu/virus-logo.png)"></div>
            </div>

            <div class="menu-buttons">
                <ul class="menu-buttons__buttons-list">
                    <li class="menu-buttons__button">PLAY</li>
                    <li class="menu-buttons__button" data-settings>SETTINGS</li>
                    <li class="menu-buttons__button">STATS</li>
                    <li class="menu-buttons__button">QUIT</li>
                </ul>

                <div style="background-image: url(./img/menu/menu-item-picker.png)" class="menu-buttons__picker"></div>
            </div>
        </div>

        <div class="blackout"></div>
    </div>

    <div class="menu-page-blur"></div>

    <div class="settings-modal">
        <div class="settings-modal__wrapper">
            <div class="settings-modal__top">
                <h1 class="settings-modal__title">GAME SETTINGS</h1>
            </div>
            <div class="settings-modal__body settings-modal-body">
                <div class="settings-modal-body__block">
                    <div class="settings-modal-body__block-title">
                        <span>SOUNDS</span>
                    </div>
                    <div class="settings-modal-body__block-body settings-group">
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>SFX</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>Music</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>Voice</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>SFX</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>Music</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>Voice</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="settings-modal-body__block">
                    <div class="settings-modal-body__block-title">
                        <span>SOUNDS</span>
                    </div>
                    <div class="settings-modal-body__block-body settings-group">
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>SFX</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>Music</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>Voice</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>SFX</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>Music</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group__item">
                            <div class="settings-group__item-left">
                                <span>Voice</span>
                            </div>
                            <div class="settings-group__item-right">
                                <div class="settings-slider">
                                    <div class="settings-slider__thumb"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.querySelector('[data-settings]').addEventListener('click', e => {
            document.querySelector('.menu-page-blur').classList.add('menu-page-blur--show');
            document.querySelector('.settings-modal').classList.add('settings-modal--show');
        });

        document.querySelector('.menu-page-blur').addEventListener('click', e => {
            if (e.target.closest('.settings-modal')) {
                return;
            }

            document.querySelector('.menu-page-blur').classList.remove('menu-page-blur--show');
            document.querySelector('.settings-modal').classList.remove('settings-modal--show');
        });
    </script>

    <script>
        const picker     = document.querySelector('.menu-buttons__picker');
        const buttonList = document.querySelector('.menu-buttons__buttons-list');
        const buttonListTop = buttonList.getBoundingClientRect().top;

        movePickerTo(buttonList.querySelector('.menu-buttons__button'))

        buttonList.addEventListener('mouseover', (e) => {
            if (!e.target.classList.contains('menu-buttons__button')) {
                return;
            }

            movePickerTo(e.target);
        });

        function movePickerTo(button) {
            const buttonTop = button.getBoundingClientRect().top - 80 - buttonListTop;

            picker.style.top = buttonTop + 'px';
        }
    </script>

    <script>

        const sliderMove = event => {
		  event.target.style.cursor = 'grabbing';

          const thumb  = event.target;
          const slider = event.target.closest('.settings-slider');

		  let shiftX = event.clientX - thumb.getBoundingClientRect().left;

	      document.addEventListener('mousemove', onMouseMove);
	      document.addEventListener('mouseup', onMouseUp);

	      function onMouseMove(event) {
	        let newLeft = event.clientX - shiftX - slider.getBoundingClientRect().left;

	        // курсор вышел из слайдера => оставить бегунок в его границах.
	        if (newLeft < 10) {
	          newLeft = 10;
	        }

	        let rightEdge = slider.offsetWidth - thumb.offsetWidth;

	        if (newLeft > rightEdge - 10) {
	          newLeft = rightEdge - 10;
	        }

	        thumb.style.left = newLeft + 'px';
	      }

	      function onMouseUp() {
	        document.removeEventListener('mouseup', onMouseUp);
	        document.removeEventListener('mousemove', onMouseMove);

			event.target.style.cursor = 'grab';
	      }
		};
        
		document.querySelectorAll('.settings-slider__thumb').forEach(item => {
            item.onmousedown = sliderMove;
        })
    </script>

</body>
</html>